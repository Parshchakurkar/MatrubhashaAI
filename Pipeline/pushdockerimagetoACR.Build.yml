
trigger:
  branches:
    include:
      - main
  paths:
    include: 
      - 'source/DockerFile'

variables: 
  serviceConnection : ACR-ServiceConnection
  ACRname: TestACRparsh
    
pool:
  vmImage: ubuntu-latest

jobs:
  - job: BuildandpushImage
    displayName: 'Create image from the Dockerfile'
    steps:
    - task: Docker@2
      displayName: dockerbuild
      inputs:
        containerRegistry: $(ACRname)
        repository: matrubhashaai
        command: 'build'
        Dockerfile: '**/Dockerfile'
        addBaseImageData: false
    - task: Docker@2
      displayName: dockerpush
      inputs:
        command: 'push'
        containerRegistry: $(ACRname)
        repository: matrubhashaai
        addBaseImageData: false
